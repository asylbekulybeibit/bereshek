<div class="debtor-form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ isEditMode ? 'Edit' : 'Add' }} Debtor</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="debtorForm" (ngSubmit)="onSubmit()">
        <div class="form-field">
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter debtor's name">
            <mat-error *ngIf="debtorForm.get('name')?.errors?.['required']">
              Name is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter debtor's email">
            <mat-error *ngIf="debtorForm.get('email')?.errors?.['required']">
              Email is required
            </mat-error>
            <mat-error *ngIf="debtorForm.get('email')?.errors?.['email']">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="outline">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="phone" placeholder="Enter debtor's phone">
            <mat-error *ngIf="debtorForm.get('phone')?.errors?.['required']">
              Phone is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="outline">
            <mat-label>Address</mat-label>
            <textarea matInput formControlName="address" placeholder="Enter debtor's address" rows="3"></textarea>
            <mat-error *ngIf="debtorForm.get('address')?.errors?.['required']">
              Address is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="error-message" *ngIf="error">
          {{ error }}
        </div>

        <div class="form-actions">
          <button mat-raised-button color="primary" type="submit" [disabled]="debtorForm.invalid || loading">
            {{ loading ? (isEditMode ? 'Updating...' : 'Creating...') : (isEditMode ? 'Update' : 'Create') }}
          </button>
          <button mat-button type="button" routerLink="/debtors">Cancel</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
